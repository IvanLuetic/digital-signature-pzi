import{c as l,o as a,a as e,h as g,t as o,F as y,e as C,r as c,z as B,l as S,g as w,k as z,n as k,j as $,_ as N}from"./index-_KYfJ8Fu.js";import{g as P,a as F,d as H}from"./user-0wb-TRvO.js";const L={class:"fixed inset-0 z-50 flex items-center justify-center px-4 bg-black/70"},E={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 min-w-[300px] max-w-lg w-full"},q={class:"flex items-center justify-between mb-4"},G={class:"font-semibold text-gray-800"},I={class:"text-sm text-gray-500"},J={class:"space-y-4 max-h-96 overflow-y-auto"},K={class:"flex items-start justify-between"},O={class:"flex-grow min-w-0"},Q={class:"flex items-center space-x-3 mb-2"},R={class:"font-semibold truncate text-gray-900"},T={class:"flex items-center space-x-6 text-sm text-gray-600"},W={class:"flex items-center space-x-1"},X={key:0,class:"text-center py-8"},Y={class:"mt-6 flex justify-end"},Z={__name:"UserView",props:{documents:{type:Array,default:()=>[]},username:{type:String,required:!0}},setup(u){const x=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),m=i=>i.split("uploads\\").pop();return(i,r)=>(a(),l("div",L,[e("div",E,[e("div",q,[e("h3",G,o(u.username)+"'s documents",1),e("span",I,o(u.documents.length)+" documents",1)]),e("div",J,[(a(!0),l(y,null,C(u.documents,d=>(a(),l("div",{key:d.id,class:"border-2 border-blue-200 rounded-lg p-4 hover:shadow-md transition-shadow duration-200"},[e("div",K,[e("div",O,[e("div",Q,[r[1]||(r[1]=e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("h5",R,o(m(d.signed_file_url)),1)]),e("div",T,[e("div",W,[r[2]||(r[2]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("span",null,"Signed "+o(x(d.signed_at)),1)])])])])]))),128))]),!u.documents||u.documents.length===0?(a(),l("div",X,r[3]||(r[3]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-gray-600"},"No documents found",-1)]))):g("",!0),e("div",Y,[e("button",{onClick:r[0]||(r[0]=d=>i.$emit("close")),class:"px-4 py-2 bg-gray-300 text-gray-700 text-sm font-medium rounded-md hover:bg-gray-400 cursor-pointer"}," Close ")])])]))}},ee={class:"max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen relative"},te={class:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-scroll"},se={class:"px-6 py-4 border-b border-gray-200"},oe={class:"flex items-center justify-between"},ae={class:"text-sm ml-3 text-gray-500"},re={class:"p-6"},ne={key:0,class:"text-center py-8"},le={key:1,class:"text-center py-8"},ie={key:2,class:"min-w-full divide-y divide-gray-200"},ce={class:"bg-white divide-y divide-gray-200 overflow-x-scroll"},de={class:"px-6 py-4 whitespace-nowrap"},ue={class:"flex items-center"},me={class:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 flex items-center justify-center text-white font-bold"},xe={class:"ml-4"},pe={class:"text-sm font-semibold text-gray-800"},ve={class:"px-6 py-4 whitespace-nowrap"},he={class:"text-sm text-gray-800"},ye={class:"px-6 py-4 whitespace-nowrap"},ge={class:"text-sm text-gray-800"},_e={class:"px-6 py-4 whitespace-nowrap"},fe={class:"text-sm text-gray-600"},be={class:"px-6 py-4 whitespace-nowrap"},we={class:"flex items-center space-x-3"},ke=["onClick"],$e=["onClick"],Ce={class:"px-6 py-4 bg-gray-50 border-t border-gray-200"},De={class:"flex items-center justify-between"},Ue={class:"text-sm text-gray-600"},Ve={class:"flex items-center space-x-2"},je=["disabled"],Me={class:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700"},Ae=["disabled"],Be={__name:"AdminDashboard",setup(u){const x=c(""),m=c(""),i=c(!1),r=c([]),d=c(!1),n=c(1),v=c(0),_=B(()=>Math.ceil(v.value/12)),f=c([]),b=c(""),D=async(p,t)=>{b.value=p,i.value=!0;try{const s=await F(t);f.value=s}catch(s){console.error("Failed to get user documents:",s)}},U=async p=>{if(confirm("Are you sure you want to delete this user?"))try{await H(p),await h(n.value),m.value="User deleted succesfully"}catch(t){t.value="Failed to delete user",console.error(t)}else return},V=async()=>{n.value--,await h(n.value)},j=async()=>{n.value++,await h(n.value)},h=async(p,t)=>{d.value=!0;try{const s=await P(p,t);r.value=s.data.users,v.value=s.data.totalUsers}catch(s){console.error("Failed to fetch users:",s)}finally{d.value=!1}},M=()=>{x.value="",m.value=""};return S(async()=>{await h(1)}),(p,t)=>(a(),l(y,null,[i.value?(a(),w(Z,{key:0,username:b.value,documents:f.value,onClose:t[0]||(t[0]=s=>i.value=!1)},null,8,["username","documents"])):g("",!0),e("div",ee,[x.value||m.value?(a(),w(z,{key:0,error:x.value,success:m.value,onClose:t[1]||(t[1]=s=>M())},null,8,["error","success"])):g("",!0),t[6]||(t[6]=e("div",{class:"mb-8"},[e("span",{class:"text-4xl font-bold text-gray-800"},"Admin Dashboard"),e("p",{class:"text-gray-600 mt-2"},"Manage users and view document signing activities")],-1)),e("div",te,[e("div",se,[e("div",oe,[t[2]||(t[2]=e("span",{class:"text-2xl sm:text-3xl font-semibold text-gray-800"},"User management",-1)),e("span",ae,o(v.value)+" users",1)])]),e("div",re,[d.value?(a(),l("div",ne,t[3]||(t[3]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Loading users...",-1)]))):r.value.length===0?(a(),l("div",le,t[4]||(t[4]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("p",{class:"mt-2 text-gray-600"},"No users found",-1)]))):(a(),l("table",ie,[t[5]||(t[5]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," ID "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Join Date "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ce,[(a(!0),l(y,null,C(r.value,s=>(a(),l("tr",{key:s.id,class:"hover:bg-blue-50 transition-colors"},[e("td",de,[e("div",ue,[e("div",me,o(s.username.charAt(0).toUpperCase()),1),e("div",xe,[e("div",pe,o(s.username),1)])])]),e("td",ve,[e("div",he,o(s.email),1)]),e("td",ye,[e("div",ge,o(s.id),1)]),e("td",_e,[e("div",fe,o(new Date(s.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})),1)]),e("td",be,[e("div",we,[e("button",{onClick:A=>D(s.username,s.id),class:"text-blue-600 cursor-pointer hover:text-blue-800 font-medium text-sm"}," View ",8,ke),e("button",{onClick:A=>U(s.id),class:"text-red-600 cursor-pointer hover:text-red-800 font-medium text-sm"}," Delete ",8,$e)])])]))),128))])]))]),e("div",Ce,[e("div",De,[e("div",Ue," Showing "+o((n.value-1)*12+1)+" to "+o(Math.min(n.value*12,v.value))+" of "+o(v.value)+" results ",1),e("div",Ve,[e("button",{class:k(["px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",[n.value===1?"cursor-not-allowed":"cursor-pointer"]]),disabled:n.value===1,onClick:V}," Previous ",10,je),e("button",Me,o(n.value),1),e("button",{class:k(["px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 disabled:opacity-50",[n.value===_.value?"cursor-not-allowed":"cursor-pointer"]]),disabled:n.value===_.value,onClick:j}," Next ",10,Ae)])])])])])],64))}},Ne={__name:"AdminDashboard",setup(u){return(x,m)=>(a(),l(y,null,[$(N),$(Be)],64))}};export{Ne as default};
